<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>Calendar with Shifts and Crypto Rates</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    ul {
      list-style-type: none;
      padding: 0;
      margin: 0;
    }
    body {
      font-family: Verdana, sans-serif;
      background: #f9f9f9;
    }
    #calendar {
      max-width: 600px;
      margin: 20px auto;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .month {
      background: #1abc9c;
      color: white;
      text-align: center;
      padding: 10px;
      font-size: 16px;
      border-radius: 8px 8px 0 0;
    }
    .month ul {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    #prev, #next {
      cursor: pointer;
      font-size: 18px;
    }
    #weekdays, #days {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      padding: 10px;
      gap: 2px;
    }
    #weekdays li, #days li {
      text-align: center;
      padding: 12px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    #days li.empty {
      border: none;
      background: transparent;
    }
    #days li.shift {
      background-color: green;
      color: white;
    }
    #days li.holiday {
      background-color: red;
      color: white;
    }
    #days li.active {
      background: #1abc9c;
      color: white;
    }
    .crypto-container {
      max-width: 600px;
      margin: 20px auto;
      padding: 10px;
      background: #f4f4f4;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    .crypto-container h2 {
      text-align: center;
      margin-bottom: 10px;
      font-size: 18px;
      color: #1abc9c;
    }
    .crypto-rate {
      display: flex;
      justify-content: space-between;
      padding: 5px 0;
      font-size: 14px;
    }

    /* Адаптивные стили */
    @media (max-width: 600px) {
      #calendar, .crypto-container {
        max-width: 100%;
        margin: 10px;
        padding: 10px;
      }
      .month ul {
        font-size: 14px;
      }
      #weekdays li, #days li {
        font-size: 12px;
        padding: 8px;
      }
      .crypto-rate {
        font-size: 12px;
      }
    }

    @media (max-width: 400px) {
      #weekdays, #days {
        grid-template-columns: repeat(7, minmax(20px, 1fr));
      }
    }
  </style>
</head>
<body>
  <div id="calendar">
    <div class="month">
      <ul>
        <li id="prev">&#10094;</li>
        <li id="month"></li>
        <li id="year"></li>
        <li id="next">&#10095;</li>
      </ul>
    </div>
    <ul id="weekdays">
      <li>Пн</li>
      <li>Вт</li>
      <li>Ср</li>
      <li>Чт</li>
      <li>Пт</li>
      <li>Сб</li>
      <li>Вс</li>
    </ul>
    <ul id="days"></ul>
  </div>
  <div class="crypto-container">
    <h2>Курсы криптовалют</h2>
    <div id="crypto-rates"></div>
  </div>
  <script>
    // Календарь и криптовалюты остались без изменений
    const today = new Date();
    let currentMonth = today.getMonth();
    let currentYear = today.getFullYear();
    const daysContainer = document.getElementById("days");
    const months = ["Январь", "Февраль", "Март", "Апрель", "Май", "Июнь", "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"];
    const cycleStart = new Date(2024, 10, 22);
    const cycleDays = 4;

    function isShiftDay(date) {
      const diffDays = Math.floor((date - cycleStart) / (1000 * 60 * 60 * 24));
      const cycleIndex = (diffDays % cycleDays + cycleDays) % cycleDays;
      return cycleIndex < 2;
    }

    function isHoliday(date) {
      const diffDays = Math.floor((date - cycleStart) / (1000 * 60 * 60 * 24));
      const cycleIndex = (diffDays % cycleDays + cycleDays) % cycleDays;
      return cycleIndex >= 2;
    }

    function showCalendar(month, year) {
      const firstDay = new Date(year, month).getDay();
      const totalDays = new Date(year, month + 1, 0).getDate();
      daysContainer.innerHTML = "";

      for (let i = 0; i < (firstDay === 0 ? 6 : firstDay - 1); i++) {
        const emptyCell = document.createElement("li");
        emptyCell.classList.add("empty");
        daysContainer.appendChild(emptyCell);
      }

      for (let day = 1; day <= totalDays; day++) {
        const date = new Date(year, month, day);
        const dayCell = document.createElement("li");
        dayCell.textContent = day;

        if (isShiftDay(date)) dayCell.classList.add("shift");
        if (isHoliday(date)) dayCell.classList.add("holiday");
        if (day === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
          dayCell.classList.add("active");
        }

        daysContainer.appendChild(dayCell);
      }

      document.getElementById("month").textContent = months[month];
      document.getElementById("year").textContent = year;
    }

    function changeMonth(offset) {
      currentYear = currentMonth === 0 && offset === -1 ? currentYear - 1 : currentYear;
      currentYear = currentMonth === 11 && offset === 1 ? currentYear + 1 : currentYear;
      currentMonth = (currentMonth + offset + 12) % 12;
      showCalendar(currentMonth, currentYear);
    }

    document.getElementById("prev").onclick = () => changeMonth(-1);
    document.getElementById("next").onclick = () => changeMonth(1);
    showCalendar(currentMonth, currentYear);

    async function fetchCryptoRates() {
      const response = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,the-open-network&vs_currencies=usd");
      const data = await response.json();

      const cryptoContainer = document.getElementById("crypto-rates");
      cryptoContainer.innerHTML = `
        <div class="crypto-rate"><strong>Bitcoin:</strong> $${data.bitcoin.usd}</div>
        <div class="crypto-rate"><strong>Ethereum:</strong> $${data.ethereum.usd}</div>
        <div class="crypto-rate"><strong>Toncoin:</strong> $${data["the-open-network"].usd}</div>
      `;
    }

    fetchCryptoRates();
    setInterval(fetchCryptoRates, 60000); // Обновление каждые 60 секунд
  </script>
</body>
</html>